<div class="search-container" data-controller="toggle-form">
  <div class="search-summary" data-toggle-form-target="summary" data-action="click->toggle-form#expand">
      <span>
        <strong>Produit :</strong> <%= params.dig(:search, :name).blank? ? "Tous" : params.dig(:search, :name) %>
      </span>
      <span>
        <strong>Ville :</strong> <%= params.dig(:search, :address).blank? ? "Partout" : params.dig(:search, :address) %>
      </span>
      <span>
        <strong>Dates :</strong>
        <%= params.dig(:search, :start_date).blank? ? "" : params.dig(:search, :start_date) %>
         -
        <%= params.dig(:search, :end_date).blank? ? "" : params.dig(:search, :end_date) %>
      </span>
      <button>Modifier</button>
    </div>

  <div class="search-form d-none" data-toggle-form-target="form" data-controller="datepicker">
    <%= simple_form_for :search, url: search_products_path, method: :get, html: { class: 'row align-items-end justify-content-end' } do |f| %>
      <div class="col-md-6 col-12 px-1">
        <%= f.input :name,
                    label: "Nom du produit",
                    placeholder: "Exemple : Perceuse",
                    input_html: { class: 'form-control', value: params.dig(:search, :name) },
                    required: false %>
      </div>
      <div class="col-md-6 col-12 px-1">
        <%= f.input :address,
                    label: "Ville",
                    placeholder: "Exemple : Lille",
                    input_html: { class: 'form-control', value: params.dig(:search, :address) },
                    required: false %>
      </div>
      <div class="col-md-6 col-12 px-1 mb-3">
        <%= f.label :start_date, "Date de dÃ©but", class: "form-label" %>
        <%= f.text_field :start_date,
                          class: "form-control",
                          placeholder: "Choisissez une date",
                          value: params.dig(:search, :start_date)&.to_date&.strftime("%Y-%m-%d"),
                          data: { datepicker_target: "startDate" } %>
      </div>

      <div class="col-md-6 col-12 px-1 mb-3">
        <%= f.label :end_date, "Date de fin", class: "form-label" %>
        <%= f.text_field :end_date,
                          class: "form-control",
                          placeholder: "Choisissez une date",
                          value: params.dig(:search, :end_date)&.to_date&.strftime("%Y-%m-%d"),
                          data: { datepicker_target: "endDate" } %>
      </div>
      <div class="col-lg-2 col-12 d-block px-1">
        <%= f.button :submit, "Rechercher", class: "btn w-100 rounded-3" %>
      </div>
    <% end %>
  </div>
</div>
