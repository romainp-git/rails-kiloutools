<div class="dashboard-renter container py-5">
  <!-- Header -->
  <div class="dashboard-header d-flex justify-content-between align-items-center mb-5">
    <div>
    <%=  %>
      <h1 class="dashboard-title fw-bold">Bonjour <%= @user.first_name %> <span>üëã</span></h1>
      <p class="dashboard-subtitle text-secondary fs-5">Bienvenue dans votre espace loueur</p>
    </div>
  </div>

  <!-- Statistiques -->
  <div class="dashboard-stats row mb-5 g-4">
    <div class="col-md-4">
      <div class="dashboard-card card shadow-sm border-0 text-center p-4">
        <div class="card-body">
          <h4 class="dashboard-card-title text-muted mb-3">Revenu total </h4>
          <p class="dashboard-card-value display-4 fw-bold text-primary"><%= @bookings.where(status: 'Accepted').sum(:amount) %> ‚Ç¨</p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card shadow-sm border-0 text-center p-4">
        <div class="card-body">
          <h4 class="dashboard-card-title text-muted mb-3">Locations valid√©</h4>
          <p class="dashboard-card-value display-4 fw-bold text-primary"><%= @bookings.where(status: 'Accepted').count %></p>
        </div>
      </div>
    </div>
    <div class="col-md-4">
      <div class="dashboard-card card shadow-sm border-0 text-center p-4">
        <div class="card-body">
          <h4 class="dashboard-card-title text-muted mb-3">Locations en attente</h4>
          <p class="dashboard-card-value display-4 fw-bold text-primary"><%= @bookings.where(status: 'Pending').count %></p>
        </div>
      </div>
    </div>
  </div>

  <!-- Boutique -->
  <div class="dashboard-shop mb-5">
    <h3 class="dashboard-section-title fw-bold mb-3">Votre boutique</h3>
    <p class="dashboard-section-subtitle text-muted mb-4">D√©velopper votre activit√© sur KilouTools</p>
    <div class="row g-4">
      <div class="col-md-6">
        <div class="dashboard-card card shadow-sm border-0 text-center p-4">
          <%=link_to new_product_path do %>
            <div class="card-body">
              <h5 class="dashboard-card-title text-dark fw-bold mb-2">Ajouter un produit</h5>
              <p class="dashboard-card-text text-muted">Augmentez votre parc mat√©riel en ajoutant des produits</p>
            </div>
          <% end %>
        </div>
      </div>
      <div class="col-md-6">
        <div class="dashboard-card card shadow-sm border-0 text-center p-4">
          <%=link_to product_summary_path do %>
            <div class="card-body">
              <h5 class="dashboard-card-title text-dark fw-bold mb-2">Mes annonces</h5>
              <p class="dashboard-card-text text-muted">Modifiez vos produits en location</p>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- R√©servations -->
  <div class="dashboard-reservations">
    <h3 class="dashboard-section-title fw-bold mb-3">Vos r√©servations</h3>
    <p class="dashboard-section-subtitle text-muted mb-4">Les r√©servations que vous avez re√ßues</p>
    <% if @bookings.any? %>
        <ul class="nav nav-tabs mb-4" id="reservationTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button" role="tab">
              Toutes
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="accepted-tab" data-bs-toggle="tab" data-bs-target="#accepted" type="button" role="tab">
              Accept√©es
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="cancelled-tab" data-bs-toggle="tab" data-bs-target="#cancelled" type="button" role="tab">
              Annul√©es
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="pending-tab" data-bs-toggle="tab" data-bs-target="#pending" type="button" role="tab">
              En attente
            </button>
          </li>
        </ul>

        <div class="tab-content" id="reservationTabsContent">
          <div class="tab-pane fade show active" id="all" role="tabpanel">
            <%= render 'bookings_table', bookings: @bookings %>
          </div>
          <div class="tab-pane fade" id="accepted" role="tabpanel">
            <%= render 'bookings_table', bookings: @bookings.select { |b| b.status == 'Accepted' } %>
          </div>
          <div class="tab-pane fade" id="cancelled" role="tabpanel">
            <%= render 'bookings_table', bookings: @bookings.select { |b| b.status == 'Refused' } %>
          </div>
          <div class="tab-pane fade" id="pending" role="tabpanel">
            <%= render 'bookings_table', bookings: @bookings.select { |b| b.status == 'Pending' } %>
          </div>
        </div>
    <% else %>
      <p>Aucune r√©servation pour le moment.</p>
  <% end %>
</div>
